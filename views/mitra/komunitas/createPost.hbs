<main class="relative w-full pt-16 pb-16 max-sm:pt-5">
  <!-- Community Header -->
  <div class="flex items-center justify-center mb-12 px-20 max-md:px-10 max-sm:px-5">
    <div>
      <h2 class="mb-2 text-5xl font-bold text-gray-900 max-sm:text-4xl">Create Post</h2>
      <p class="text-lg text-gray-600 max-sm:text-base">Share your moments and inspiration</p>
    </div>
  </div>

  <!-- Create Post Form -->
  <div class="flex flex-col items-center max-w-[980px] px-20 mx-auto max-md:px-10 max-sm:px-5">
    <form class="w-full bg-white p-8 rounded-3xl shadow-md space-y-6">
      <div>
        <label for="title" class="block text-lg font-bold text-gray-900">Title</label>
        <input
          type="text"
          id="title"
          name="title"
          placeholder="Enter the title of your post"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"
          required
        />
      </div>

      <div>
        <label for="content" class="block text-lg font-bold text-gray-900">Content</label>
        <textarea
          id="content"
          name="content"
          rows="4"
          placeholder="Write your post content here"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"
          required
        ></textarea>
      </div>

    <div>
    <label for="images" class="block text-lg font-bold text-gray-900">Upload Images (optional)</label>
    
    <!-- Multiple Image Upload Input -->
    <input
        type="file"
        id="images"
        name="images[]"
        accept="image/*"
        multiple
        class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"
        onchange="previewImages(event)"
    >
    
    <!-- Images Preview Section -->
    <div id="imagesPreview" class="mt-4 flex gap-4 flex-wrap" style="display:none;">
        <!-- Preview images will be inserted here -->
    </div>
    </div>

      <div class="flex items-center justify-between">
        <button
          type="submit"
          class="px-8 py-4 text-base font-semibold text-white bg-orange-500 rounded-2xl shadow-lg transition-transform transition-shadow duration-300 hover:bg-orange-600 hover:-translate-y-0.5 hover:shadow-xl active:translate-y-0 max-sm:px-6 max-sm:py-3 max-sm:text-sm"
        >
          Create Post
        </button>

        <button
          type="button"
          class="px-6 py-3 text-sm font-semibold text-gray-700 bg-gray-200 rounded-xl shadow-md transition-transform transition-shadow duration-300 hover:bg-gray-300 hover:-translate-y-0.5 hover:shadow-xl active:translate-y-0 max-sm:px-5 max-sm:py-2"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</main>

<script>
    // Function to preview the image when selected
// Function to preview the images when selected
function previewImages(event) {
  const files = event.target.files;  // Get the files from input
  const previewContainer = document.getElementById('imagesPreview');  // Get the preview container

  // Clear previous previews
  previewContainer.innerHTML = '';

  // Loop through each file
  for (let i = 0; i < files.length; i++) {
    const file = files[i];  // Get the file at index i
    const reader = new FileReader();  // Create a new FileReader instance
    
    // Event handler for when the file is read successfully
    reader.onload = function(e) {
      const imageUrl = e.target.result;  // The image URL generated by FileReader

      // Create a new div for each image preview
      const previewDiv = document.createElement('div');
      previewDiv.classList.add('relative', 'w-24', 'h-24', 'mr-4', 'mb-4');
      
      // Create the image element
      const img = document.createElement('img');
      img.src = imageUrl;
      img.alt = `Image Preview ${i + 1}`;
      img.classList.add('w-full', 'h-full', 'object-cover', 'rounded-lg', 'shadow-lg'); // Add styles for smaller preview

      // Create the remove button for this image
      const removeButton = document.createElement('button');
      removeButton.classList.add('absolute', 'top-0', 'right-0', 'bg-gray-200', 'text-red-500', 'rounded-full', 'w-6', 'h-6', 'flex', 'items-center', 'justify-center');
      removeButton.innerHTML = 'Ã—';  // Close icon

      // Append the image and remove button to the preview container
      previewDiv.appendChild(img);
      previewDiv.appendChild(removeButton);
      previewContainer.appendChild(previewDiv);

      // Add event listener to remove image preview
      removeButton.addEventListener('click', () => {
        previewContainer.removeChild(previewDiv); // Remove the previewDiv from the container
      });
    };
        
    // Read the file as a data URL
    if (file) {
      reader.readAsDataURL(file);
    }
  }

  // Display the preview section
  previewContainer.style.display = 'flex';
}

</script>
