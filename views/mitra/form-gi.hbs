<main class="flex flex-col items-end mt-10 ml-20 w-full max-w-[1211px] max-md:mt-10 max-md:max-w-full">
    <h2 class="self-start text-3xl font-semibold text-neutral-900">GI ( General Information)</h2>

<form action="/umkm/form-gi" method="POST">
<!-- General Business Information Section -->
<section class="flex flex-col items-start py-14 pl-16 pr-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:pl-5 max-md:mt-10 max-md:max-w-full">
  <h3 class="text-3xl font-semibold text-center text-teal-700">Informasi Umum Usaha</h3>
  <p class="mt-7 text-xl leading-none text-gray-500 max-md:max-w-full">
    Lengkapi field yang diperlukan untuk melanjutkan ke step berikutnya
  </p>

  <!-- Organization Name + Business License Row -->
  <div class="mt-14 mr-0 w-full max-md:mt-10 max-md:max-w-full">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Nama Perusahaan -->
      <div class="w-6/12 max-md:ml-0 max-md:w-full">
        <div class="px-4 py-3">
          <label for="business_name" class="block pb-2 text-base font-medium">Nama Perusahaan</label>
          <input 
            type="text"
            id="business_name"
            name="business_name"
            placeholder="Masukkan Nama Perusahaan"
            class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
          >
        </div>
      </div>

      <!-- Nomor Izin Usaha -->
      <div class="w-6/12 max-md:ml-0 max-md:w-full">
        <div class="px-4 py-3">
          <label for="business_license" class="block pb-2 text-base font-medium">Nomor Izin Usaha</label>
          <input 
            type="text"
            id="business_id"
            name="business_id"
            placeholder="Masukkan Nomor Izin Usaha"
            class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
          >
        </div>
      </div>
    </div>
  </div>


<!-- Legal Form & Tahun Berdiri -->
<!-- Legal Form & Tahun Berdiri -->
  <div class="mr-0 w-full max-md:mt-10 max-md:max-w-full">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Legal Form -->
      <div class="w-6/12 max-md:ml-0 max-md:w-full">
        <div class="px-4 py-3">
          <label for="legal_form" class="block pb-2 text-base font-medium">
            Legal Form/Status Kepemilikan
          </label>
          <select
            id="legal_form"
            name="legal_form"
            class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
          >
            <option value="">Pilih</option>
            <option value="PT">PT (Perseroan Terbatas)</option>
            <option value="CV">CV</option>
            <option value="Koperasi">Koperasi</option>
            <option value="UMKM">UMKM</option>
            <option value="Yayasan">Yayasan</option>
            <option value="lainnya">Lainnya</option>
          </select>

          <!-- Input tambahan jika pilih "Lainnya" -->
          <input
            type="text"
            id="status-kepemilikan-lainnya"
            name="status_kepemilikan_lainnya"
            placeholder="Lainnya (sebutkan)"
            class="w-full px-8 py-4 mt-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition hidden"
          >
        </div>
      </div>

  <!-- Tahun Berdiri -->
      <div class="w-6/12 max-md:ml-0 max-md:w-full">
        <div class="px-4 py-3">
          <label for="established_year" class="block pb-2 text-base font-medium">
            Tahun Berdiri
          </label>
          <input
            type="date"
            id="established_year"
            name="established_year"
            placeholder="Pilih tanggal"
            class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
          />
        </div>
  </div>
  </div>
</div>




</section>


<!-- Informasi Industri & Produk -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10">
  <h3 class="text-3xl font-semibold text-teal-700">Informasi Industri & Produk</h3>

<!-- Jenis Kegiatan/Industri Utama (Single Choice - Radio Button) -->
<div class="w-full mt-8">
  <label class="block pb-2 text-base font-medium">Jenis Kegiatan/Industri Utama</label>
  <div class="flex flex-col gap-2">

    <!-- Radio options -->
    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Manufaktur"> Manufaktur
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Jasa"> Jasa
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Perdagangan"> Perdagangan
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Pertanian/Perikanan"> Pertanian/Perikanan
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Teknologi"> Teknologi
    </label>

    <!-- Lainnya dengan input text -->
    <label class="flex flex-col gap-1 cursor-pointer">
      <div class="flex items-center gap-2">
        <input type="radio" name="industry_type" class="industry_type" value="Lainnya" id="industry-other-radio"> Lainnya
      </div>
      <input
        type="text"
        id="industry-other-input"
        name="industri_lainnya"
        placeholder="Sebutkan industri lainnya"
        class="w-full mt-1 px-3 py-2 rounded-lg border border-gray-300 text-teal-700 hidden"
      />
    </label>

  </div>
</div>

<script>
  const otherRadio = document.getElementById('industry-other-radio');
  const otherInput = document.getElementById('industry-other-input');

  // Tampilkan input text hanya saat "Lainnya" dipilih
  document.querySelectorAll('input[name="industri_utama"]').forEach(radio => {
    radio.addEventListener('change', () => {
      if (otherRadio.checked) {
        otherInput.classList.remove('hidden');
      } else {
        otherInput.classList.add('hidden');
        otherInput.value = ''; // bersihkan input jika tidak dipilih
      }
    });
  });
</script>


<script>
  // Tampilkan input Lainnya jika dicentang
  const otherCheckbox = document.querySelector('input.industry-tag[value="Lainnya"]');
  const otherInput = document.getElementById('industry-other-input');

  otherCheckbox.addEventListener('change', function() {
    if (this.checked) {
      otherInput.classList.remove('hidden');
      otherInput.focus();
    } else {
      otherInput.classList.add('hidden');
      otherInput.value = '';
    }
  });
</script>


<div class="w-full mt-6">
  {{!-- <label for="brands" class="block pb-2 text-base font-medium">Daftar Merek/Brand yang Dimiliki</label>
    <div class="flex gap-4 max-md:flex-col">
    <textarea
      id="brands"
      name="brands"
      rows="4"
      placeholder="Contoh: Brand A, Brand B, Brand C…"
      class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"
    ></textarea> --}}

      <!-- Provinsi (dropdown) -->
      <div class="w-1/2 max-md:w-full">
      <label for="produk" class="block pb-2 text-base font-medium">Produk/Jasa yang Ditawarkan</label>
        <textarea
          id="products_offered"
          name="products_offered"
          rows="4"
          placeholder="Jelaskan singkat produk/jasa utama yang ditawarkan…"
          class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"
        ></textarea>
    </div>
  </div>
  <!-- Daftar Merek/Brand yang Dimiliki (Long text) -->

  <!-- Lokasi Kantor Pusat -->
  <div class="w-full mt-6">
    <label for="hq" class="block pb-2 text-base font-medium">Lokasi Kantor Pusat (Headquarters)</label>
    <input
      type="text"
      id="headquarters"
      name="headquarters"
      placeholder="Contoh: Jl. Piai Tangah, Cupak Tangah, Kec. Pauh, Kota Padang, Sumatera Barat 25158"
      class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
    />
  </div>

  <!-- Lokasi Operasional -->
  <div class="w-full mt-6">
    <label class="block pb-2 text-base font-medium">Lokasi Operasional</label>
    <div class="flex gap-4 max-md:flex-col">
      <!-- Kota/Region (short text) -->
      <input
        type="text"
        id="city"
        name="city"
        placeholder="Contoh: Jl. Piai Tangah, Cupak Tangah, Kec. Pauh, Kota Padang, Sumatera Barat 25158)"
        class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition max-md:w-full"
      />

      <!-- Provinsi (dropdown) -->
      <div class="w-1/2 max-md:w-full">
        <select
          id="province"
          name="province"
          class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
        >
          <option value="">Pilih Provinsi</option>
          <option>DKI Jakarta</option>
          <option>Jawa Barat</option>
          <option>Jawa Tengah</option>
          <option>Jawa Timur</option>
          <option>Sumatera Barat</option>
          <option value="lainnya">Lainnya</option>
        </select>

        <!-- Input provinsi lainnya (muncul jika pilih Lainnya) -->
        <input
          type="text"
          id="province"
          name="province"
          placeholder="Provinsi lainnya"
          class="w-full px-8 py-4 mt-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition hidden"
        />
      </div>
    </div>
  </div>
</section>

<!-- Informasi Kepemilikan -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5">
  <h3 class="text-3xl font-semibold text-teal-700">Informasi Kepemilikan</h3>

  <div class="w-full mt-8">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Pemilik/Shareholders Utama -->
      <div class="mt-8 w-full">
  <h4 class="text-xl font-semibold text-teal-700">Pemilik / Shareholders</h4>
  <table class="w-full mt-4 table-auto border-separate border-spacing-2">
    <thead>
      <tr class="bg-teal-700 text-white">
        <th class="px-4 py-2">Nama Pemilik</th>
        <th class="px-4 py-2">Persentase Kepemilikan (%)</th>
        <th class="px-4 py-2">Aksi</th>
      </tr>
    </thead>
    <tbody id="shareholders-table">
      <tr>
        <td class="border px-4 py-2">
          <input type="text" name="shareholders[0][name]" placeholder="Nama Pemilik"
            class="w-full px-4 py-2 rounded-lg border border-gray-300" />
        </td>
        <td class="border px-4 py-2 relative">
          <input type="number" name="shareholders[0][ownership_percentage]" placeholder="0 - 100" min="0" max="100" step="0.01"
            class="w-full px-4 py-2 pr-8 rounded-lg border border-gray-300" />
          <span class="absolute right-6 top-1/2 -translate-y-1/2 text-gray-400">%</span>
        </td>
        <td class="border px-4 py-2 text-center">
          <button type="button" class="text-red-600 remove-row">Hapus</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button type="button" id="add-shareholder" class="mt-3 text-sm text-teal-700 hover:underline">+ Tambah Pemilik</button>
</div>

<script>
  document.getElementById("add-shareholder").addEventListener("click", () => {
    const table = document.getElementById("shareholders-table");
    const index = table.rows.length;
    const row = `
      <tr>
        <td class="border px-4 py-2">
          <input type="text" name="shareholders[${index}][name]" placeholder="Nama Pemilik"
            class="w-full px-4 py-2 rounded-lg border border-gray-300" />
        </td>
        <td class="border px-4 py-2 relative">
          <input type="number" name="shareholders[${index}][ownership_percentage]" placeholder="0 - 100" min="0" max="100" step="0.01"
            class="w-full px-4 py-2 pr-8 rounded-lg border border-gray-300" />
          <span class="absolute right-6 top-1/2 -translate-y-1/2 text-gray-400">%</span>
        </td>
        <td class="border px-4 py-2 text-center">
          <button type="button" class="text-red-600 remove-row">Hapus</button>
        </td>
      </tr>`;
    table.insertAdjacentHTML("beforeend", row);
  });

  document.addEventListener("click", (e) => {
    if (e.target.classList.contains("remove-row")) {
      e.target.closest("tr").remove();
    }
  });
</script>

    </div>
  </div>
</section>

<!-- Pasar yang Dilayani Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10">
  <h3 class="text-3xl font-semibold text-teal-700">Pasar yang Dilayani</h3>

  <!-- Wilayah Operasi and Target Market Row -->
<div class="mt-10 w-full">
  <div class="flex gap-5 max-md:flex-col">
    <!-- Wilayah Operasi (Multiple choice) -->
    <div class="w-6/12 max-md:w-full">
      <label class="block pb-2 text-base font-medium">Wilayah Operasi</label>
      <div class="flex flex-col gap-2">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="market_scope[]" value="lokal"> Lokal
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="market_scope[]" value="nasional"> Nasional
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="market_scope[]" value="regional"> Regional (ASEAN)
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="market_scope[]" value="global"> Global
        </label>
      </div>
    </div>

    <!-- Target Market (Multiple choice) -->
    <div class="w-6/12 max-md:w-full">
      <label class="block pb-2 text-base font-medium">Target Market</label>
      <div class="flex flex-col gap-2">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="target_market[]" value="b2b"> B2B
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="target_market[]" value="b2c"> B2C
        </label>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox" name="target_market[]" value="pemerintah"> Pemerintah
        </label>
        <!-- Lainnya dengan input text -->
        <label class="flex flex-col gap-1 cursor-pointer">
          <div class="flex items-center gap-2">
            <input type="checkbox" id="target-market-other-check"> Lainnya
          </div>
          <input type="text" id="target-market-other-input" name="target_market_other"
            placeholder="Sebutkan"
            class="w-full mt-1 px-3 py-2 rounded-lg border border-gray-300 text-teal-700 hidden" />
        </label>
      </div>
    </div>
  </div>
</div>

<script>
  // toggle input lainnya
  const otherCheck = document.getElementById("target-market-other-check");
  const otherInput = document.getElementById("target-market-other-input");
  otherCheck.addEventListener("change", () => {
    otherInput.classList.toggle("hidden", !otherCheck.checked);
  });
</script>



</section>

<!-- Informasi Karyawan & Pekerja Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:max-w-full">
  <h3 class="text-3xl font-semibold text-center text-teal-700">Informasi Karyawan & Pekerja</h3>

  <!-- Total Jumlah Karyawan & Pekerja Row -->
  <div class="mt-10 w-full">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Total Karyawan (Full-Time) -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Total Jumlah Karyawan (Full-Time)</label>
        <input type="number" placeholder="Masukkan Jumlah Karyawan Full-Time" 
          id="total_employees_fulltime"
          name="total_employees_fulltime"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <!-- Total Pekerja Paruh Waktu/Outsourcing -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Total Jumlah Pekerja Paruh Waktu/Outsourcing</label>
        <input type="number" 
          id="total_employees_parttime"
          name="total_employees_parttime" 
          placeholder="Masukkan Jumlah Pekerja Paruh Waktu"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>

  <!-- Komposisi Gender Row -->
  <div class="mt-10 w-full">
    <div class="flex gap-5 max-md:flex-col">
      <!-- % Laki-laki -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">% Laki-laki</label>
        <input type="number" placeholder="Masukkan Persentase Laki-laki"
          id="male_percentage"
          name="male_percentage"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <!-- % Perempuan -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">% Perempuan</label>
        <input type="number" placeholder="Masukkan Persentase Perempuan"
          id="female_percentage"
          name="female_percentage"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>

  <!-- Jumlah Karyawan per Departemen (Table) -->
  <div class="mt-10 w-full">
  <h4 class="text-2xl font-semibold text-teal-700">Jumlah Karyawan per Departemen</h4>
  <table class="w-full mt-4 table-auto border-separate border-spacing-2">
    <thead>
      <tr class="bg-teal-700 text-white">
        <th class="px-4 py-2">Departemen</th>
        <th class="px-4 py-2">Jumlah Karyawan</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border px-4 py-2">
          <input type="hidden" name="departments[0][department_name]" value="HR">
          HR
        </td>
        <td class="border px-4 py-2">
          <input type="number" name="departments[0][employee_count]" class="w-full px-4 py-2 rounded-lg border border-gray-300" placeholder="Jumlah Karyawan HR">
        </td>
      </tr>
      <tr>
        <td class="border px-4 py-2">
          <input type="hidden" name="departments[1][department_name]" value="Marketing">
          Marketing
        </td>
        <td class="border px-4 py-2">
          <input type="number" name="departments[1][employee_count]" class="w-full px-4 py-2 rounded-lg border border-gray-300" placeholder="Jumlah Karyawan Marketing">
        </td>
      </tr>
      <tr>
        <td class="border px-4 py-2">
          <input type="hidden" name="departments[2][department_name]" value="IT">
          IT
        </td>
        <td class="border px-4 py-2">
          <input type="number" name="departments[2][employee_count]" class="w-full px-4 py-2 rounded-lg border border-gray-300" placeholder="Jumlah Karyawan IT">
        </td>
      </tr>
      <tr>
        <td class="border px-4 py-2">
          <input type="hidden" name="departments[3][department_name]" value="Finance">
          Finance
        </td>
        <td class="border px-4 py-2">
          <input type="number" name="departments[3][employee_count]" class="w-full px-4 py-2 rounded-lg border border-gray-300" placeholder="Jumlah Karyawan Finance">
        </td>
      </tr>
    </tbody>
  </table>
</div>


</section>

<!-- Nilai, Prinsip, dan Standar Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:max-w-full">
  <h3 class="text-3xl font-semibold text-center text-teal-700">Nilai, Prinsip, dan Standar</h3>

  <!-- Core Values Perusahaan -->
  <div class="mt-10 w-full">
    <label class="block pb-2 text-base font-medium">Core Values Perusahaan</label>
    <textarea placeholder="Masukkan Core Values Perusahaan"
      id="core_values"
      name="core_values"
      class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"></textarea>
  </div>

  <!-- Prinsip atau Kode Etik yang Diterapkan -->
  <div class="mt-10 w-full">
    <label class="block pb-2 text-base font-medium">Prinsip atau Kode Etik yang Diterapkan</label>
    <textarea placeholder="Masukkan Prinsip atau Kode Etik yang Diterapkan"
      id="ethics_principles"
      name="ethics_principles"
      class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"></textarea>
  </div>

  <!-- Sertifikasi/Standar yang Dimiliki -->
  <div class="mt-10 w-full">
  <label class="block pb-2 text-base font-medium">Sertifikasi/Standar yang Dimiliki</label>
  <div class="flex flex-wrap gap-4 max-md:flex-col">

    <!-- Checkbox group -->
    <label class="flex items-center gap-2">
      <input type="checkbox" name="certifications[]" value="ISO 9001" class="text-teal-700">
      ISO 9001 (Quality Management)
    </label>

    <label class="flex items-center gap-2">
      <input type="checkbox" name="certifications[]" value="ISO 14001" class="text-teal-700">
      ISO 14001 (Environmental Management)
    </label>

    <label class="flex items-center gap-2">
      <input type="checkbox" name="certifications[]" value="ISO 45001" class="text-teal-700">
      ISO 45001 (Occupational Health and Safety)
    </label>

    <!-- Lainnya -->
    <div class="flex items-center gap-2">
      <input type="checkbox" id="cert-other-checkbox" class="text-teal-700">
      <label for="cert-other-checkbox">Lainnya:</label>
      <input
        type="text"
        id="cert-other-input"
        name="cert_other"
        placeholder="Sertifikasi lainnya"
        class="w-full px-4 py-2 rounded-lg border border-gray-300 text-black placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition hidden"
      />
    </div>
  </div>
</div>

<script>
  // JS kecil supaya input text muncul kalau "lainnya" dicentang
  document.getElementById('cert-other-checkbox').addEventListener('change', function () {
    document.getElementById('cert-other-input').classList.toggle('hidden', !this.checked);
  });
</script>

</section>

<!-- Pemangku Kepentingan (Stakeholders) Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:max-w-full">
  <h3 class="text-3xl font-semibold text-center text-teal-700">Pemangku Kepentingan (Stakeholders)</h3>

  <!-- Daftar Kelompok Pemangku Kepentingan (Vertikal) -->
  <div class="mt-10 w-full">
    <label class="block pb-2 text-base font-medium">Daftar Kelompok Pemangku Kepentingan</label>
    <div class="flex flex-col gap-4">

      <!-- Row: Pelanggan -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[0][type]" value="Pelanggan" class="text-teal-700">
          Pelanggan
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[0][relationship]" placeholder="Hubungan dengan pelanggan"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: Karyawan -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[1][type]" value="Karyawan" class="text-teal-700">
          Karyawan
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[1][relationship]" placeholder="Hubungan dengan karyawan"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: Pemasok -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[2][type]" value="Pemasok" class="text-teal-700">
          Pemasok
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[2][relationship]" placeholder="Hubungan dengan pemasok"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: Pemerintah/Regulator -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[3][type]" value="Pemerintah/Regulator" class="text-teal-700">
          Pemerintah/Regulator
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[3][relationship]" placeholder="Hubungan dengan pemerintah/regulator"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: Investor/Shareholder -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[4][type]" value="Investor/Shareholder" class="text-teal-700">
          Investor/Shareholder
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[4][relationship]" placeholder="Hubungan dengan investor/shareholder"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: Masyarakat Lokal -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[5][type]" value="Masyarakat Lokal" class="text-teal-700">
          Masyarakat Lokal
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[5][relationship]" placeholder="Hubungan dengan masyarakat lokal"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: LSM/Komunitas -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[6][type]" value="LSM/Komunitas" class="text-teal-700">
          LSM/Komunitas
        </label>
        <div class="w-2/3">
          <input type="text" name="stakeholders[6][relationship]" placeholder="Hubungan dengan LSM/komunitas"
            class="rel-input w-full px-4 py-2 rounded-lg border border-gray-300 hidden" disabled>
        </div>
      </div>

      <!-- Row: Lainnya -->
      <div class="flex items-start gap-4" data-stakeholder-row>
        <label class="flex items-center gap-2 w-1/3">
          <input type="checkbox" name="stakeholders[7][type]" value="Lainnya" class="text-teal-700">
          Lainnya
        </label>
        <div class="w-2/3 flex gap-4 max-md:flex-col">
          <input type="text" name="stakeholders[7][stakeholder_other]" placeholder="Kelompok lainnya"
            class="other-input w-1/2 px-4 py-2 rounded-lg border border-gray-300 hidden max-md:w-full" disabled>
          <input type="text" name="stakeholders[7][relationship]" placeholder="Hubungan dengan stakeholder lain"
            class="rel-input w-1/2 px-4 py-2 rounded-lg border border-gray-300 hidden max-md:w-full" disabled>
        </div>
      </div>

    </div>
  </div>

</section>


<section class="px-12 pt-12 pb-5 mt-14 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:mr-1.5 max-md:max-w-full">
  <div class="flex flex-col gap-10 max-md:gap-8">
    <!-- Header -->
    <div>
      <h3 class="text-3xl font-semibold text-teal-700">Kontak & Dokumen Pendukung</h3>
    </div>

    <!-- Baris 1: Nama Kontak & Posisi/Jabatan -->
    <div class="flex gap-5 max-md:flex-col">
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Nama Kontak Utama</label>
        <input type="text" placeholder="Nama Kontak Utama"
        id="pic_name"
      name="pic_name"
          class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Posisi/Jabatan</label>
        <input type="text" placeholder="Posisi atau Jabatan"
        id="pic_position"
      name="pic_position"
          class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>

    <!-- Baris 2: Email & Telepon + Unggah Dokumen -->
    <div class="flex gap-5 max-md:flex-col">
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Email</label>
        <input type="text" placeholder="Email"
        id="pic_email"
      name="pic_email"
          class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Nomor Telepon</label>
        <input type="number" placeholder="Nomor Telepon"
        id="pic_phone"
      name="pic_phone"
          class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Unggah Dokumen Pendukung (opsional)</label>
        <input type="file"
        id="supporting_documents"
      name="supporting_documents"
          class="w-full px-4 py-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>
</section>


<!-- Save Button Container -->
<div class="w-full flex justify-end">
  <button class="flex overflow-hidden gap-2.5 items-start px-10 py-3 mt-10 mb-40 text-base font-medium text-center text-white whitespace-nowrap bg-orange-500 rounded-xl max-md:px-5 max-md:mt-10 hover:bg-orange-600 transition-colors">
    Simpan
  </button>
</div>


</form>

<script>
  // Tag selection functionality (tetap)
  function initializeTagSelection() {
    const activityTags = document.querySelectorAll('.activity-tag');
    activityTags.forEach(tag => {
      tag.addEventListener('click', function() {
        activityTags.forEach(t => {
          t.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          t.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        });
        this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
      });
    });

    const marketTags = document.querySelectorAll('.market-tag');
    marketTags.forEach(tag => {
      tag.addEventListener('click', function() {
        marketTags.forEach(t => {
          t.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          t.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        });
        this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
      });
    });

    const standardTags = document.querySelectorAll('.standard-tag');
    standardTags.forEach(tag => {
      tag.addEventListener('click', function() {
        if (this.classList.contains('active')) {
          this.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          this.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        } else {
          this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
          this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
        }
      });
    });

    const stakeholderTags = document.querySelectorAll('.stakeholder-tag');
    stakeholderTags.forEach(tag => {
      tag.addEventListener('click', function() {
        if (this.classList.contains('active')) {
          this.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          this.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        } else {
          this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
          this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
        }
      });
    });

    const topicTags = document.querySelectorAll('.topic-tag');
    topicTags.forEach(tag => {
      tag.addEventListener('click', function() {
        if (this.classList.contains('active')) {
          this.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          this.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        } else {
          this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
          this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
        }
      });
    });
  }

  // ====== Tambahan: Dinamis baris Pemilik/Shareholder + Validasi total % ======
  function initOwnershipSection() {
    const container = document.getElementById('owners-container');
    const addBtn = document.getElementById('add-owner-row');
    const totalHint = document.getElementById('owners-total-hint');

    // Kalau elemen2 tidak ada di halaman ini, cukup skip tanpa error
    if (!container || !addBtn) return;

    let ownerIndex = container.querySelectorAll('.owner-row').length || 0;

    function updateTotalHint() {
      const percentInputs = container.querySelectorAll('input[name^="owners"][name$="[percentage]"]');
      let sum = 0;
      percentInputs.forEach(inp => {
        const v = parseFloat(inp.value);
        if (!isNaN(v)) sum += v;
      });
      if (totalHint) {
        totalHint.textContent = `Total persentase saat ini: ${sum.toFixed(2)}% (disarankan 100%).`;
        const off = Math.abs(sum - 100) > 0.01;
        totalHint.classList.toggle('text-red-600', off);
        totalHint.classList.toggle('text-gray-500', !off);
      }
      return sum;
    }

    function attachInputListeners(scope) {
      scope.querySelectorAll('input[name^="owners"][name$="[percentage]"]').forEach(inp => {
        inp.addEventListener('input', updateTotalHint);
      });
    }

    // Listener tombol tambah baris
    addBtn.addEventListener('click', () => {
      const row = document.createElement('div');
      row.className = 'owner-row flex gap-5 max-md:flex-col';
      row.setAttribute('data-index', ownerIndex);

      row.innerHTML = `
        <div class="w-8/12 max-md:w-full">
          <label class="block pb-2 text-base font-medium">Pemilik/Shareholder</label>
          <input
            type="text"
            name="owners[${ownerIndex}][name]"
            placeholder="Nama pemilik/shareholder"
            class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
          />
        </div>
        <div class="w-4/12 max-md:w-full">
          <label class="block pb-2 text-base font-medium">Kepemilikan (%)</label>
          <div class="relative">
            <input
              type="number"
              name="owners[${ownerIndex}][percentage]"
              min="0" max="100" step="0.01"
              placeholder="0 - 100"
              class="w-full px-8 py-4 pr-12 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
            />
            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">%</span>
          </div>
        </div>
        <div class="flex items-end max-md:w-full">
          <button type="button" class="remove-owner-row px-4 py-3 rounded-xl border border-gray-300 text-gray-600 hover:bg-gray-50">
            Hapus
          </button>
        </div>
      `;

      container.appendChild(row);
      attachInputListeners(row);
      updateTotalHint();
      ownerIndex++;
    });

    // Delegasi aksi Hapus baris
    container.addEventListener('click', (e) => {
      const btn = e.target.closest('.remove-owner-row');
      if (!btn) return;
      const rows = container.querySelectorAll('.owner-row');
      // jangan biarkan semua baris terhapus; minimal 1 baris
      if (rows.length > 1) {
        btn.closest('.owner-row').remove();
        updateTotalHint();
      }
    });

    // Pasang listener pada baris yang sudah ada saat load
    attachInputListeners(container);
    updateTotalHint();

    // Validasi sebelum submit: konfirmasi bila total != 100
    const form = document.querySelector('form[action="/umkm/form-gi"]') || container.closest('form');
    if (form) {
      form.addEventListener('submit', (e) => {
        const sum = updateTotalHint();
        if (Math.abs(sum - 100) > 0.01) {
          const ok = confirm('Total persentase kepemilikan belum 100%. Tetap lanjutkan?');
          if (!ok) e.preventDefault();
        }
      });
    }
  }

  // ====== Tambahan: Stakeholders - tampilkan kolom hubungan hanya saat dicentang ======
  function initStakeholderToggle() {
    // Cari setiap baris stakeholder. Prefer data attribute, fallback cari pola umum.
    const rows = document.querySelectorAll('[data-stakeholder-row]');
    if (rows.length === 0) {
      // fallback: tiap baris yang punya checkbox dan input text di dalamnya
      document.querySelectorAll('section input[type="checkbox"][name^="stakeholders"]').forEach(cb => {
        const row = cb.closest('.flex');
        if (row) applyToggleLogic(row, cb);
      });
      return;
    }

    rows.forEach(row => {
      const cb = row.querySelector('input[type="checkbox"][name^="stakeholders"]');
      if (cb) applyToggleLogic(row, cb);
    });

    function applyToggleLogic(row, cb) {
      // input yang akan dipakai: .rel-input dan .other-input bila ada
      let toggleTargets = row.querySelectorAll('.rel-input, .other-input');
      if (toggleTargets.length === 0) {
        // fallback: semua text input di row kecuali checkbox
        toggleTargets = row.querySelectorAll('input[type="text"]');
      }

      function sync() {
        const on = cb.checked;
        toggleTargets.forEach(inp => {
          inp.classList.toggle('hidden', !on);
          inp.disabled = !on;
          if (!on) inp.value = inp.dataset.preserve ? inp.value : inp.value; // placeholder untuk logic tambahan bila ingin reset
        });
      }

      cb.addEventListener('change', sync);
      sync(); // set awal
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    initializeTagSelection();
    initOwnershipSection();     // fitur tambah/hapus & validasi kepemilikan
    initStakeholderToggle();    // tampilkan kolom hubungan saat dicentang
  });
</script>


