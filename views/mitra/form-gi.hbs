<main class="flex flex-col items-end mt-10 ml-20 w-full max-w-[1211px] max-md:mt-10 max-md:max-w-full">
    <h2 class="self-start text-3xl font-semibold text-neutral-900">General Disclosure</h2>

<form action="/umkm/form-gi" method="POST">
<!-- General Business Information Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10">
  <h3 class="text-3xl font-semibold text-teal-700">Organization Profile</h3>

  <!-- Row 1: Official Name and Business License Number -->
  <div class="w-full mt-6">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Official Name -->
      <div class="w-6/12 max-md:w-full">
        <label for="organization_name" class="block pb-2 text-base font-medium">Official Name</label>
        <input type="text" id="organization_name" name="organization_name" placeholder="Enter Official Organization Name"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <!-- Business License Number -->
      <div class="w-6/12 max-md:w-full">
        <label for="business_license_number" class="block pb-2 text-base font-medium">Business License Number</label>
        <input type="text" id="business_license_number" name="business_license_number" placeholder="Enter Business License Number"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>

  <!-- Row 2: Ownership Type and Legal Form -->
  <div class="w-full mt-6">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Ownership Type -->
      <div class="w-6/12 max-md:w-full">
        <label for="ownership_type" class="block pb-2 text-base font-medium">Ownership Type</label>
        <select id="ownership_type" name="ownership_type"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
          <option value="">Select</option>
          <option value="public">Public</option>
          <option value="private">Private</option>
        </select>
      </div>

      <!-- Legal Form -->
      <div class="w-6/12 max-md:w-full">
        <label for="legal_form" class="block pb-2 text-base font-medium">Legal Form</label>
        <select id="legal_form" name="legal_form"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
          <option value="">Select</option>
          <option value="legal_entity">Legal Entity</option>
          <option value="partnership">Partnership</option>
          <option value="sole_proprietorship">Sole Proprietorship</option>
          <option value="non_profit">Non-Profit</option>
          <option value="association">Association</option>
          <option value="charity">Charity</option>
          <option value="other">Other</option>
        </select>
            <!-- Additional Input if "Other" is selected -->
        <!-- Additional Input if "Other" is selected -->
        <input
          type="text"
          id="legal_form_other"
          name="legal_form_other"
          placeholder="Other (please specify)"
          class="w-full px-8 py-4 mt-3 text-base text-black rounded-2xl border-2 border-gray-400 bg-white placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition hidden"
          disabled
        >

      </div>
    </div>
  </div>

  <!-- Row 3: Headquarters Location and Country of Operation -->
  <div class="w-full mt-6">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Headquarters Location -->
      <div class="w-6/12 max-md:w-full">
        <label for="headquarters" class="block pb-2 text-base font-medium">Headquarters Location</label>
        <input type="text" id="headquarters" name="headquarters" placeholder="Enter Headquarters Address"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

    <!-- Country of Operation (Multiple Selection with Chips) -->
    <div class="w-6/12 max-md:w-full">
     <label for="headquarters" class="block pb-2 text-base font-medium">Headquarters Location</label>
  <button type="button" id="dropdownToggle"
    class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
    Country List
    <svg xmlns="http://www.w3.org/2000/svg" class="w-3 fill-slate-900 inline items-end" viewBox="0 0 24 24">
      <path fill-rule="evenodd"
        d="M11.99997 18.1669a2.38 2.38 0 0 1-1.68266-.69733l-9.52-9.52a2.38 2.38 0 1 1 3.36532-3.36532l7.83734 7.83734 7.83734-7.83734a2.38 2.38 0 1 1 3.36532 3.36532l-9.52 9.52a2.38 2.38 0 0 1-1.68266.69734z"
        clip-rule="evenodd" data-original="#000000" />
    </svg>
  </button>

  <ul id="dropdownMenu" class="absolute block shadow-lg bg-white py-2 px-2 z-[1000] min-w-full w-max rounded max-h-96 overflow-auto hidden">
    <li class="mb-2">
      <input placeholder="Search..."
        class="px-4 py-2.5 w-full rounded text-slate-900 text-sm border border-slate-100 outline-0 bg-slate-50 focus:bg-transparent focus:border-slate-900" />
    </li>
    <!-- Country Items List -->
    <li class="dropdown-item py-2.5 px-4 hover:bg-slate-50 rounded text-black text-sm cursor-pointer" data-country="USA">
      <div class="flex items-center">
        <img src="https://readymadeui.com/usa_flag.webp" class="w-6 mr-3" />
        USA
      </div>
    </li>
    <li class="dropdown-item py-2.5 px-4 hover:bg-slate-50 rounded text-black text-sm cursor-pointer" data-country="England">
      <div class="flex items-center">
        <img src="https://readymadeui.com/uk_flag.webp" class="w-6 mr-3" />
        England
      </div>
    </li>
    <li class="dropdown-item py-2.5 px-4 hover:bg-slate-50 rounded text-black text-sm cursor-pointer" data-country="India">
      <div class="flex items-center">
        <img src="https://readymadeui.com/india_flag.webp" class="w-6 mr-3" />
        India
      </div>
    </li>
    <li class="dropdown-item py-2.5 px-4 hover:bg-slate-50 rounded text-black text-sm cursor-pointer" data-country="Singapore">
      <div class="flex items-center">
        <img src="https://readymadeui.com/singapore_flag.webp" class="w-6 mr-3" />
        Singapore
      </div>
    </li>
  </ul>

  <!-- Display selected countries -->
  <div id="selectedCountries" class="mt-4 text-sm text-slate-900">
    <!-- Selected countries will appear here -->
  </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    let dropdownToggle = document.getElementById('dropdownToggle');
    let dropdownMenu = document.getElementById('dropdownMenu');
    let selectedCountriesContainer = document.getElementById('selectedCountries');

    // Function to toggle the dropdown menu visibility
    function toggleDropdown() {
        dropdownMenu.classList.toggle('hidden');
        dropdownMenu.classList.toggle('block');
    }

    // Function to hide the dropdown when clicking outside
    function hideDropdown() {
        dropdownMenu.classList.add('hidden');
        dropdownMenu.classList.remove('block');
    }

    // Open dropdown when button is clicked
    dropdownToggle.addEventListener('click', (event) => {
        event.stopPropagation(); // Prevent document click from closing the dropdown
        toggleDropdown();
    });

    // Hide dropdown when clicking outside
    document.addEventListener('click', (event) => {
        if (!dropdownMenu.contains(event.target) && event.target !== dropdownToggle) {
            hideDropdown();
        }
    });

    // Handle country selection
    const countryItems = dropdownMenu.querySelectorAll('.dropdown-item');
    countryItems.forEach((item) => {
        item.addEventListener('click', () => {
            let countryName = item.textContent.trim();
            let countryFlag = item.querySelector('img').src;

            // Create chip element for selected country
            let selectedCountryChip = document.createElement('div');
            selectedCountryChip.classList.add('inline-flex', 'items-center', 'px-3', 'py-1', 'mr-2', 'mb-2', 'bg-teal-700', 'text-white', 'rounded-full', 'text-xs', 'cursor-pointer');
            selectedCountryChip.innerHTML = `<img src="${countryFlag}" class="w-4 h-4 mr-2 rounded-full" /> ${countryName} <span class="ml-2 text-white" style="font-size: 12px;">&times;</span>`;

            // Add the chip to the selected countries container
            selectedCountriesContainer.appendChild(selectedCountryChip);

            // Remove country chip when clicked
            selectedCountryChip.addEventListener('click', () => {
                selectedCountryChip.remove();
            });

            // Close the dropdown after selection
            hideDropdown();
        });
    });

    // Search countries in the dropdown
    const searchInput = dropdownMenu.querySelector('input');
    searchInput.addEventListener('input', () => {
        let filter = searchInput.value.toLowerCase();
        countryItems.forEach((item) => {
            let countryName = item.textContent.trim().toLowerCase();
            item.style.display = countryName.includes(filter) ? '' : 'none';
        });
    });
});

</script>

    </div>
  </div>

  <!-- Row 4: Controlled Entities and Reporting Period -->
  <div class="w-full mt-6">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Controlled Entities -->
      <div class="w-6/12 max-md:w-full">
        <label for="controlled_entities" class="block pb-2 text-base font-medium">Controlled Entities</label>
        <div class="flex flex-col gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="controlled_entities[]" value="anak_perusahaan" class="text-teal-700">
            Anak Perusahaan
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="controlled_entities[]" value="usaha_bersama" class="text-teal-700">
            Usaha Bersama
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="controlled_entities[]" value="afiliasi" class="text-teal-700">
            Afiliasi
          </label>
        </div>
      </div>


      <!-- Reporting Period -->
      <div class="w-6/12 max-md:w-full">
        <label for="reporting_period" class="block pb-2 text-base font-medium">Reporting Period (year)</label>
        <!-- Row FLEX supaya sejajar -->
        <div class="flex flex-wrap items-end gap-3 mt-2">
            <!-- Mode -->
            <div class="min-w-[180px]">
            <select id="period_mode_gov"
                class="w-full px-4 py-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition" required>
                <option value="">Pilih</option>
                <option value="tahun">Tahun</option>
                <option value="triwulan">Triwulan</option>
            </select>
            </div>

            <!-- Tahun (muncul saat pilih "Tahun") -->
            <div id="year_wrap_gov" class="min-w-[180px] hidden">
            <select id="period_year_gov"
                class="w-full px-4 py-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
            </select>
            </div>

            <!-- Triwulan tahun berjalan (muncul saat pilih "Triwulan") -->
            <div id="quarter_wrap_gov" class="min-w-[220px] hidden">
            <select id="period_quarter_gov"
                class="w-full px-4 py-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
            </select>
            </div>
        </div>
      </div>
    </div>
  </div>

  <div class="w-full mt-6">
    <label for="reporting_changes" class="block pb-2 text-base font-medium">Re-presentation of Information</label>
    <select id="reporting_changes" name="reporting_changes"
      class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      <option value="">Select Re-presentation Type</option>
      <option value="change_reporting_period">Change in Reporting Period</option>
      <option value="business_type">Business Type</option>
      <option value="measurement_method_and_asset_disposal">Measurement Method and Asset Disposal</option>
      <option value="merger_or_acquisition">Merger or Acquisition</option>
    </select>
  </div>
  <!-- Row 5: External Assurance -->
  <div class="w-full mt-6">
    <label for="external_assurance" class="block pb-2 text-base font-medium">External Assurance (Profile and Expertise Level of the Assurer)</label>
    <table class="w-full table-auto border-separate border-spacing-2">
      <thead>
        <tr class="bg-teal-700 text-white">
          <th class="px-4 py-2">Assurer Name</th>
          <th class="px-4 py-2">Id Assurer</th>
          <th class="px-4 py-2">Expertise Level (%)</th>
          <th class="px-4 py-2">Action</th>
        </tr>
      </thead>
      <tbody id="assurers-table">
        <tr>
          <td class="border px-4 py-2">
            <input type="text" name="assurers[0][name]" placeholder="Assurer Name"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2 relative">
            <input type="number" name="assurers[0][id]" placeholder="ID Assurer"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2 relative">
            <input type="number" name="assurers[0][expertise_percentage]" placeholder="0 - 100" min="0" max="100" step="0.01"
              class="w-full px-4 py-2 pr-8 rounded-lg border border-gray-300" />
            <span class="absolute right-6 top-1/2 -translate-y-1/2 text-gray-400">%</span>
          </td>
          <td class="border px-4 py-2 text-center">
            <button type="button" class="text-red-600 remove-row">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>
    <button type="button" id="add-assurer" class="mt-3 text-sm text-teal-700 hover:underline">+ Add Assurer</button>
  </div>

  <script>
    document.getElementById("add-assurer").addEventListener("click", () => {
      const table = document.getElementById("assurers-table");
      const index = table.rows.length;
      const row = `
        <tr>
          <td class="border px-4 py-2">
            <input type="text" name="assurers[${index}][name]" placeholder="Assurer Name"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2 relative">
            <input type="number" name="assurers[${index}][id]" placeholder="ID Assurer"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2 relative">
            <input type="number" name="assurers[${index}][expertise_percentage]" placeholder="0 - 100" min="0" max="100" step="0.01"
              class="w-full px-4 py-2 pr-8 rounded-lg border border-gray-300" />
            <span class="absolute right-6 top-1/2 -translate-y-1/2 text-gray-400">%</span>
          </td>
          <td class="border px-4 py-2 text-center">
            <button type="button" class="text-red-600 remove-row">Remove</button>
          </td>
        </tr>`;
      table.insertAdjacentHTML("beforeend", row);
    });

    document.addEventListener("click", (e) => {
      if (e.target.classList.contains("remove-row")) {
        e.target.closest("tr").remove();
      }
    });
  </script>

</section>



<!-- Informasi Industri & Produk -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10">
  <h3 class="text-3xl font-semibold text-teal-700">Industry & Product Information</h3>

<!-- Jenis Kegiatan/Industri Utama (Single Choice - Radio Button) -->
<div class="w-full mt-8">
  <label class="block pb-2 text-base font-medium">Business Relationship with Suppliers</label>
  <div class="flex flex-col gap-2">

    <!-- Radio options -->
    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Manufaktur"> Manufacturering
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Jasa"> Services
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Perdagangan"> Trading
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Pertanian/Perikanan"> Agriculture/Fisheries
    </label>

    <label class="flex items-center gap-2 cursor-pointer">
      <input type="radio" name="industry_type" class="industry_type" value="Teknologi"> Technology
    </label>

    <!-- Lainnya dengan input text -->
    <label class="flex flex-col gap-1 cursor-pointer">
      <div class="flex items-center gap-2">
        <input type="radio" name="industry_type" class="industry_type" value="Lainnya" id="industry-other-radio"> Others
      </div>
      <input
        type="text"
        id="industry-other-input"
        name="industri_lainnya"
        placeholder="Sebutkan industri lainnya"
        class="w-full mt-1 px-3 py-2 rounded-lg border border-gray-300 text-teal-700 hidden"
      />
    </label>

  </div>
</div>

<script>
  // Listen for changes to the "Legal Form" dropdown
  const legalFormSelect = document.getElementById('legal_form');
  const otherInput = document.getElementById('status-kepemilikan-lainnya');
  
  // Check when the dropdown value changes
  legalFormSelect.addEventListener('change', function() {
    if (this.value === 'other') {
      // Show the input field if "Other" is selected
      otherInput.classList.remove('hidden');
    } else {
      // Hide the input field if anything else is selected
      otherInput.classList.add('hidden');
      otherInput.value = ''; // Clear the input field if hidden
    }
  });
</script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    // === LEGAL FORM: tampilkan input "Other" saat dipilih ===
    const legalFormSelect      = document.getElementById('legal_form');
    const legalFormOtherInput  = document.getElementById('legal_form_other');

    function syncLegalFormOther() {
      const show = legalFormSelect && legalFormSelect.value === 'other';
      if (!legalFormOtherInput) return;
      legalFormOtherInput.classList.toggle('hidden', !show);
      legalFormOtherInput.toggleAttribute('disabled', !show);
      if (!show) legalFormOtherInput.value = '';
    }

    if (legalFormSelect) {
      // set state awal (misal data lama sudah "other")
      syncLegalFormOther();
      legalFormSelect.addEventListener('change', syncLegalFormOther);
    }

    // === INDUSTRI: input "Lainnya" hanya muncul saat radio 'Lainnya' dipilih ===
    // perbaiki selector yang salah (sebelumnya .industry-tag tidak ada)
    const industryOtherRadio = document.getElementById('industry-other-radio');
    const industryOtherInput = document.getElementById('industry-other-input');
    const industryRadios     = document.querySelectorAll('input.industry_type');

    function syncIndustryOther() {
      if (!industryOtherRadio || !industryOtherInput) return;
      const show = industryOtherRadio.checked;
      industryOtherInput.classList.toggle('hidden', !show);
      industryOtherInput.toggleAttribute('disabled', !show);
      if (!show) industryOtherInput.value = '';
    }

    if (industryRadios.length) {
      industryRadios.forEach(r => r.addEventListener('change', syncIndustryOther));
      // set state awal
      syncIndustryOther();
    }
  });
</script>

<!-- Supplier Types and Number of Suppliers in one row -->
<div class="w-full mt-8">
  <div class="flex gap-5 max-md:flex-col">
    <!-- Supplier Types (Multiple Choice) -->
    <div class="w-6/12 max-md:w-full">
    <label class="block pb-2 text-base font-medium">Organization Activities</label>
    <textarea
      id="organization_activities"
      name="organization_activities"
      rows="4"
      placeholder="Describe the activities the organization engages in"
      class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"
    ></textarea>
      
    </div>

    <div class="w-6/12 max-md:w-full">
      <label for="quantity_of_product" class="block pb-2 text-base font-medium">Quantity of Product</label>
      <input
        type="number"
        id="quantity_of_product"
        name="quantity_of_product"
        placeholder="Enter the quantity of product"
        class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
      />
    </div>
  </div>
</div>




  <!-- Geographical Locations where Products/Services are Offered (Table) -->
  <div class="w-full mt-8">
    <label class="block pb-2 text-base font-medium">Geographical Locations where Products/Services are Offered</label>
    <table class="w-full mt-4 table-auto border-separate border-spacing-2">
      <thead>
        <tr class="bg-teal-700 text-white">
          <th class="px-4 py-2">Street</th>
          <th class="px-4 py-2">City</th>
          <th class="px-4 py-2">Country</th>
          <th class="px-4 py-2">Action</th>
        </tr>
      </thead>
      <tbody id="geo-locations-table">
        <tr>
          <td class="border px-4 py-2">
            <input type="text" name="geo_locations[0][street]" placeholder="Enter Street" class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2">
            <input type="text" name="geo_locations[0][city]" placeholder="Enter City" class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2">
            <input type="text" name="geo_locations[0][country]" placeholder="Enter Country" class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2 text-center">
            <button type="button" class="text-red-600 remove-location-row">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>
    <button type="button" id="add-geo-location" class="mt-3 text-sm text-teal-700 hover:underline">+ Add Location</button>
  </div>
  <script>
    // Add new location row
    document.getElementById("add-geo-location").addEventListener("click", () => {
      const table = document.getElementById("geo-locations-table");
      const index = table.rows.length;
      const row = `
        <tr>
          <td class="border px-4 py-2">
            <input type="text" name="geo_locations[${index}][street]" placeholder="Enter Street" class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2">
            <input type="text" name="geo_locations[${index}][city]" placeholder="Enter City" class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2">
            <input type="text" name="geo_locations[${index}][country]" placeholder="Enter Country" class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
          <td class="border px-4 py-2 text-center">
            <button type="button" class="text-red-600 remove-location-row">Remove</button>
          </td>
        </tr>`;
      table.insertAdjacentHTML("beforeend", row);
    });

    // Remove location row
    document.addEventListener("click", (e) => {
      if (e.target.classList.contains("remove-location-row")) {
        e.target.closest("tr").remove();
      }
    });
  </script>

  <!-- Supplier Types, Number of Suppliers, and Supplier Relationship in one row -->
  <div class="w-full mt-8">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Supplier Types (Multiple Choice) -->
      <div class="w-4/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Supplier Types</label>
        <div class="flex flex-col gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_type[]" value="Broker"> Broker
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_type[]" value="Contractor"> Contractor
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_type[]" value="Wholesaler"> Wholesaler
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_type[]" value="Other"> Other
          </label>
        </div>
      </div>

      <!-- Number of Suppliers -->
      <div class="w-4/12 max-md:w-full">
        <label for="number_of_suppliers" class="block pb-2 text-base font-medium">Number of Suppliers</label>
        <input
          type="number"
          id="number_of_suppliers"
          name="number_of_suppliers"
          placeholder="Enter the number of suppliers"
          class="px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
        />
      </div>

      <!-- Supplier Relationship Types -->
      <div class="w-4/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Supplier Relationship</label>
        <div class="flex flex-col gap-2">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_relationship[]" value="Long-Term"> Long-Term
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_relationship[]" value="Short-Term"> Short-Term
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_relationship[]" value="Contract"> Contract
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_relationship[]" value="Non-Contract"> Non-Contract
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_relationship[]" value="Project-Based"> Project-Based
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="checkbox" name="supplier_relationship[]" value="Event-Based"> Event-Based
          </label>
        </div>
      </div>
    </div>
  </div>



</section>

<!-- Informasi Karyawan & Pekerja Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:max-w-full">
  <h3 class="text-3xl font-semibold text-center text-teal-700">Employee & Worker Information</h3>

  <!-- Total Workforce -->
  <div class="mt-10 w-full">
    <div class="flex gap-5 max-md:flex-col">
      <!-- Total Workforce -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Total Workforce (End of Reporting Period)</label>
        <input type="number" placeholder="Enter Total Workforce" 
          id="total_workforce"
          name="total_workforce"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>

  <!-- Komposisi Gender Row -->
  <div class="mt-10 w-full">
    <div class="flex gap-5 max-md:flex-col">
      <!-- % Male -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">% Male</label>
        <input type="number" placeholder="Enter Male Percentage"
          id="male_percentage"
          name="male_percentage"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <!-- % Women -->
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">% Women</label>
        <input type="number" placeholder="Enter Women Percentage"
          id="female_percentage"
          name="female_percentage"
          class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>

  <!-- Total Workforce Details (Table) -->
  <div class="mt-10 w-full">
    <h4 class="text-2xl font-semibold text-teal-700">Workforce Breakdown</h4>
    <table class="w-full mt-4 table-auto border-separate border-spacing-2">
      <thead>
        <tr class="bg-teal-700 text-white">
          <th class="px-4 py-2">Workforce Type</th>
          <th class="px-4 py-2">Number of Workers</th>
        </tr>
      </thead>
      <tbody>
        <!-- Full-time Employees -->
        <tr>
          <td class="border px-4 py-2">Full-time Employees</td>
          <td class="border px-4 py-2">
            <input type="number" name="fulltime_employees" placeholder="Enter Number of Full-time Employees"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
        </tr>

        <!-- Part-time Employees -->
        <tr>
          <td class="border px-4 py-2">Part-time Employees</td>
          <td class="border px-4 py-2">
            <input type="number" name="parttime_employees" placeholder="Enter Number of Part-time Employees"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
        </tr>

        <!-- Employees with Flexible Working Hours -->
        <tr>
          <td class="border px-4 py-2">Employees with Flexible Working Hours</td>
          <td class="border px-4 py-2">
            <input type="number" name="flexible_hour_employees" placeholder="Enter Number of Employees with Flexible Hours"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
        </tr>

        <!-- Temporary Employees -->
        <tr>
          <td class="border px-4 py-2">Temporary Employees</td>
          <td class="border px-4 py-2">
            <input type="number" name="temporary_employees" placeholder="Enter Number of Temporary Employees"
              class="w-full px-4 py-2 rounded-lg border border-gray-300" />
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Temporary Employment Context -->
  <div class="mt-10 w-full">
    <label class="block pb-2 text-base font-medium">Contextual Information on Temporary Employment</label>
    <textarea placeholder="Provide the reasons for temporary employment (e.g., project-based, seasonal work)"
      id="temporary_employment_context"
      name="temporary_employment_context"
      class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"></textarea>
  </div>



</section>

<!-- Non-Direct Workers Section -->
<section class="flex flex-col items-start py-14 px-16 mt-10 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:max-w-full">
  <h3 class="text-3xl font-semibold text-center text-teal-700">Non-Direct Workers</h3>

  <!-- Types of Non-Direct Workers and Contract Relationships (Table) -->
  <div class="mt-10 w-full">
    <h4 class="text-2xl font-semibold text-teal-700">Non-Direct Worker Types and Contract Relationships</h4>
    <table class="w-full mt-4 table-auto border-separate border-spacing-2">
      <thead>
        <tr class="bg-teal-700 text-white">
          <th class="px-4 py-2">Worker Type</th>
          <th class="px-4 py-2">Contract Type</th>
        </tr>
      </thead>
      <tbody>
        <!-- Agency Workers -->
        <tr>
          <td class="border px-4 py-2">Agency Workers</td>
          <td class="border px-4 py-2">
            <select name="agency_workers_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="fixed-term">Fixed-Term</option>
              <option value="temporary">Temporary</option>
              <option value="long-term">Long-Term</option>
            </select>
          </td>
        </tr>

        <!-- Long-term Interns -->
        <tr>
          <td class="border px-4 py-2">Long-term Interns</td>
          <td class="border px-4 py-2">
            <select name="long_term_interns_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="fixed-term">Fixed-Term</option>
              <option value="temporary">Temporary</option>
              <option value="long-term">Long-Term</option>
            </select>
          </td>
        </tr>

        <!-- Contractors -->
        <tr>
          <td class="border px-4 py-2">Contractors</td>
          <td class="border px-4 py-2">
            <select name="contractors_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="project-based">Project-Based</option>
              <option value="temporary">Temporary</option>
            </select>
          </td>
        </tr>

        <!-- Domestic Workers -->
        <tr>
          <td class="border px-4 py-2">Domestic Workers</td>
          <td class="border px-4 py-2">
            <select name="domestic_workers_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="permanent">Permanent</option>
              <option value="temporary">Temporary</option>
            </select>
          </td>
        </tr>

        <!-- Short-term Interns -->
        <tr>
          <td class="border px-4 py-2">Short-term Interns</td>
          <td class="border px-4 py-2">
            <select name="short_term_interns_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="fixed-term">Fixed-Term</option>
              <option value="temporary">Temporary</option>
            </select>
          </td>
        </tr>

        <!-- Entrepreneurs -->
        <tr>
          <td class="border px-4 py-2">Entrepreneurs</td>
          <td class="border px-4 py-2">
            <select name="entrepreneurs_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="independent">Independent</option>
              <option value="project-based">Project-Based</option>
            </select>
          </td>
        </tr>

        <!-- Subcontractors -->
        <tr>
          <td class="border px-4 py-2">Subcontractors</td>
          <td class="border px-4 py-2">
            <select name="subcontractors_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="fixed-term">Fixed-Term</option>
              <option value="project-based">Project-Based</option>
            </select>
          </td>
        </tr>

        <!-- Volunteers -->
        <tr>
          <td class="border px-4 py-2">Volunteers</td>
          <td class="border px-4 py-2">
            <select name="volunteers_contract_type"
              class="w-full px-4 py-2 rounded-lg border border-gray-300">
              <option value="">Select Contract Type</option>
              <option value="unpaid">Unpaid</option>
              <option value="temporary">Temporary</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Job Types Performed (Text Area) -->
  <div class="mt-10 w-full">
    <label class="block pb-2 text-base font-medium">Types of Jobs Performed</label>
    <textarea placeholder="List the types of jobs performed by non-direct workers"
      id="job_types_non_direct_workers"
      name="job_types_non_direct_workers"
      class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border-gray-300 border border-solid bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition resize-y"></textarea>
  </div>
</section>

<section class="px-12 pt-12 pb-5 mt-14 w-full bg-white rounded-2xl shadow-2xl max-w-[981px] max-md:px-5 max-md:mt-10 max-md:mr-1.5 max-md:max-w-full">
  <div class="flex flex-col gap-10 max-md:gap-8">
    <!-- Header -->
    <div>
      <h3 class="text-3xl font-semibold text-teal-700">Contact & Supporting Documents</h3>
    </div>

    <!-- Row 1: Contact Name & Position -->
    <div class="flex gap-5 max-md:flex-col">
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Primary Contact Name</label>
        <input type="text" placeholder="Primary Contact Name"
        id="pic_name"
        name="pic_name"
        class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Position/Job Title</label>
        <input type="text" placeholder="Position or Job Title"
        id="pic_position"
        name="pic_position"
        class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>

    <!-- Row 2: Email & Phone + Upload Documents -->
    <div class="flex gap-5 max-md:flex-col">
      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Email</label>
        <input type="text" placeholder="Email"
        id="pic_email"
        name="pic_email"
        class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Phone Number</label>
        <input type="number" placeholder="Phone Number"
        id="pic_phone"
        name="pic_phone"
        class="w-full px-8 py-4 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>

      <div class="w-6/12 max-md:w-full">
        <label class="block pb-2 text-base font-medium">Upload Supporting Documents (optional)</label>
        <input type="file"
        id="supporting_documents"
        name="supporting_documents"
        class="w-full px-4 py-3 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition">
      </div>
    </div>
  </div>
</section>


<!-- Save Button Container -->
<div class="w-full flex justify-end">
  <button class="flex overflow-hidden gap-2.5 items-start px-10 py-3 mt-10 mb-40 text-base font-medium text-center text-white whitespace-nowrap bg-orange-500 rounded-xl max-md:px-5 max-md:mt-10 hover:bg-orange-600 transition-colors">
    Submit
  </button>
</div>


</form>

<script>
  // Tag selection functionality (tetap)
  function initializeTagSelection() {
    const activityTags = document.querySelectorAll('.activity-tag');
    activityTags.forEach(tag => {
      tag.addEventListener('click', function() {
        activityTags.forEach(t => {
          t.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          t.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        });
        this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
      });
    });

    const marketTags = document.querySelectorAll('.market-tag');
    marketTags.forEach(tag => {
      tag.addEventListener('click', function() {
        marketTags.forEach(t => {
          t.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          t.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        });
        this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
      });
    });

    const standardTags = document.querySelectorAll('.standard-tag');
    standardTags.forEach(tag => {
      tag.addEventListener('click', function() {
        if (this.classList.contains('active')) {
          this.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          this.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        } else {
          this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
          this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
        }
      });
    });

    const stakeholderTags = document.querySelectorAll('.stakeholder-tag');
    stakeholderTags.forEach(tag => {
      tag.addEventListener('click', function() {
        if (this.classList.contains('active')) {
          this.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          this.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        } else {
          this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
          this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
        }
      });
    });

    const topicTags = document.querySelectorAll('.topic-tag');
    topicTags.forEach(tag => {
      tag.addEventListener('click', function() {
        if (this.classList.contains('active')) {
          this.classList.remove('bg-teal-700', 'text-neutral-50', 'active');
          this.classList.add('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
        } else {
          this.classList.remove('border', 'border-gray-300', 'border-solid', 'bg-slate-50', 'text-teal-700');
          this.classList.add('bg-teal-700', 'text-neutral-50', 'active');
        }
      });
    });
  }

  // ====== Tambahan: Dinamis baris Pemilik/Shareholder + Validasi total % ======
  function initOwnershipSection() {
    const container = document.getElementById('owners-container');
    const addBtn = document.getElementById('add-owner-row');
    const totalHint = document.getElementById('owners-total-hint');

    // Kalau elemen2 tidak ada di halaman ini, cukup skip tanpa error
    if (!container || !addBtn) return;

    let ownerIndex = container.querySelectorAll('.owner-row').length || 0;

    function updateTotalHint() {
      const percentInputs = container.querySelectorAll('input[name^="owners"][name$="[percentage]"]');
      let sum = 0;
      percentInputs.forEach(inp => {
        const v = parseFloat(inp.value);
        if (!isNaN(v)) sum += v;
      });
      if (totalHint) {
        totalHint.textContent = `Total persentase saat ini: ${sum.toFixed(2)}% (disarankan 100%).`;
        const off = Math.abs(sum - 100) > 0.01;
        totalHint.classList.toggle('text-red-600', off);
        totalHint.classList.toggle('text-gray-500', !off);
      }
      return sum;
    }

    function attachInputListeners(scope) {
      scope.querySelectorAll('input[name^="owners"][name$="[percentage]"]').forEach(inp => {
        inp.addEventListener('input', updateTotalHint);
      });
    }

    // Listener tombol tambah baris
    addBtn.addEventListener('click', () => {
      const row = document.createElement('div');
      row.className = 'owner-row flex gap-5 max-md:flex-col';
      row.setAttribute('data-index', ownerIndex);

      row.innerHTML = `
        <div class="w-8/12 max-md:w-full">
          <label class="block pb-2 text-base font-medium">Pemilik/Shareholder</label>
          <input
            type="text"
            name="owners[${ownerIndex}][name]"
            placeholder="Nama pemilik/shareholder"
            class="w-full px-8 py-4 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
          />
        </div>
        <div class="w-4/12 max-md:w-full">
          <label class="block pb-2 text-base font-medium">Kepemilikan (%)</label>
          <div class="relative">
            <input
              type="number"
              name="owners[${ownerIndex}][percentage]"
              min="0" max="100" step="0.01"
              placeholder="0 - 100"
              class="w-full px-8 py-4 pr-12 mt-2 text-base text-black rounded-2xl border border-gray-300 bg-slate-50 placeholder-black/50 outline-none hover:ring focus:ring-2 focus:ring-teal-600 transition"
            />
            <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">%</span>
          </div>
        </div>
        <div class="flex items-end max-md:w-full">
          <button type="button" class="remove-owner-row px-4 py-3 rounded-xl border border-gray-300 text-gray-600 hover:bg-gray-50">
            Hapus
          </button>
        </div>
      `;

      container.appendChild(row);
      attachInputListeners(row);
      updateTotalHint();
      ownerIndex++;
    });

    // Delegasi aksi Hapus baris
    container.addEventListener('click', (e) => {
      const btn = e.target.closest('.remove-owner-row');
      if (!btn) return;
      const rows = container.querySelectorAll('.owner-row');
      // jangan biarkan semua baris terhapus; minimal 1 baris
      if (rows.length > 1) {
        btn.closest('.owner-row').remove();
        updateTotalHint();
      }
    });

    // Pasang listener pada baris yang sudah ada saat load
    attachInputListeners(container);
    updateTotalHint();

    // Validasi sebelum submit: konfirmasi bila total != 100
    const form = document.querySelector('form[action="/umkm/form-gi"]') || container.closest('form');
    if (form) {
      form.addEventListener('submit', (e) => {
        const sum = updateTotalHint();
        if (Math.abs(sum - 100) > 0.01) {
          const ok = confirm('Total persentase kepemilikan belum 100%. Tetap lanjutkan?');
          if (!ok) e.preventDefault();
        }
      });
    }
  }

  // ====== Tambahan: Stakeholders - tampilkan kolom hubungan hanya saat dicentang ======
  function initStakeholderToggle() {
    // Cari setiap baris stakeholder. Prefer data attribute, fallback cari pola umum.
    const rows = document.querySelectorAll('[data-stakeholder-row]');
    if (rows.length === 0) {
      // fallback: tiap baris yang punya checkbox dan input text di dalamnya
      document.querySelectorAll('section input[type="checkbox"][name^="stakeholders"]').forEach(cb => {
        const row = cb.closest('.flex');
        if (row) applyToggleLogic(row, cb);
      });
      return;
    }

    rows.forEach(row => {
      const cb = row.querySelector('input[type="checkbox"][name^="stakeholders"]');
      if (cb) applyToggleLogic(row, cb);
    });

    function applyToggleLogic(row, cb) {
      // input yang akan dipakai: .rel-input dan .other-input bila ada
      let toggleTargets = row.querySelectorAll('.rel-input, .other-input');
      if (toggleTargets.length === 0) {
        // fallback: semua text input di row kecuali checkbox
        toggleTargets = row.querySelectorAll('input[type="text"]');
      }

      function sync() {
        const on = cb.checked;
        toggleTargets.forEach(inp => {
          inp.classList.toggle('hidden', !on);
          inp.disabled = !on;
          if (!on) inp.value = inp.dataset.preserve ? inp.value : inp.value; // placeholder untuk logic tambahan bila ingin reset
        });
      }

      cb.addEventListener('change', sync);
      sync(); // set awal
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    initializeTagSelection();
    initOwnershipSection();     // fitur tambah/hapus & validasi kepemilikan
    initStakeholderToggle();    // tampilkan kolom hubungan saat dicentang
  });
</script>

<script>
    /* ===== Helpers ===== */
    function toggleEl(el, show, alsoDisable = false) {
        if (!el) return;
        el.classList.toggle('hidden', !show);
        if (alsoDisable) el.disabled = !show;
        if (!show && (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA')) el.value = '';
        if (!show && el.tagName === 'SELECT') el.value = '';
    }

    function fillYears(sel) {
        const now = new Date();
        const thisYear = now.getFullYear();
        const isDec31 = (now.getMonth() === 11 && now.getDate() === 31);
        const start = isDec31 ? thisYear : thisYear - 1; 
        sel.innerHTML = '<option value="">Pilih Tahun</option>';
        // Pastikan 2024 ada dalam list jika belum ada
        const yearsToFill = new Set();
        for (let i = 0; i < 3; i++) {
            yearsToFill.add(start - i);
        }
        yearsToFill.add(2024); // Menjamin 2024 selalu ada
        
        // Sortir tahun dari terbaru ke terlama
        Array.from(yearsToFill).sort((a, b) => b - a).forEach(y => {
            const o = document.createElement('option');
            o.value = String(y);
            o.textContent = y;
            sel.appendChild(o);
        });
    }

    function fillCurrentYearQuarters(sel) {
        const now = new Date();
        const y = now.getFullYear();
        const m = now.getMonth(); // 0..11
        const isDec31 = (m === 11 && now.getDate() === 31);
        let maxQ = Math.floor(m / 3) + 1;
        if (isDec31) maxQ = 4;
        if (maxQ > 4) maxQ = 4;
        const labels = {
            1: 'Triwulan 1 (JanMar)',
            2: 'Triwulan 2 (AprJun)',
            3: 'Triwulan 3 (JulSep)',
            4: 'Triwulan 4 (OktDes)'
        };
        sel.innerHTML = '<option value="">Pilih Triwulan</option>';
        for (let q = 1; q <= maxQ; q++) {
            const o = document.createElement('option');
            o.value = `${y}-Q${q}`;
            o.textContent = `${labels[q]} ${y}`;
            sel.appendChild(o);
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form'); // Disesuaikan selector form-nya
        const submitButton = form?.querySelector('button[type="submit"]');

        /* ===== Periode Pelaporan (Tahun / Triwulan) ===== */
        const modeSel = document.getElementById('period_mode_gov');
        const yearWrap = document.getElementById('year_wrap_gov');
        const yearSel = document.getElementById('period_year_gov');
        const qWrap = document.getElementById('quarter_wrap_gov');
        const qSel = document.getElementById('period_quarter_gov');

        fillYears(yearSel);
        fillCurrentYearQuarters(qSel);

        function syncMode() {
            if (modeSel.value === 'tahun') {
                toggleEl(yearWrap, true);
                toggleEl(qWrap, false);
            } else if (modeSel.value === 'triwulan') {
                toggleEl(yearWrap, false);
                toggleEl(qWrap, true);
            } else {
                toggleEl(yearWrap, false);
                toggleEl(qWrap, false);
            }
        }

        modeSel.addEventListener('change', syncMode);

        // ===== MODIFIKASI: Atur Nilai Default di sini =====
        modeSel.value = 'tahun'; // Atur default mode ke 'tahun'
        yearSel.value = '2024';  // Atur default tahun ke '2024'

        // Panggil syncMode() SETELAH mengatur default untuk menampilkan field yang benar
        syncMode();
        
    });
</script>
